---
title: "Robo-Instruct: Simulator-Augmented Instruction Alignment For Finetuning CodeLLMs" 
authors: [Zichao Hu<sup>1</sup>, Junyi Jessy Li<sup>1</sup>, Arjun Guha<sup>2</sup>, Joydeep Biswas<sup>1</sup> ]
layout: project
order: 1
---

<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500&display=swap');
.curly-font {
    font-family: 'Space Grotesk', cursive;
    color: orange;
}
</style>

<div class="text-center">
  <a type="button" class="btn btn-outline-secondary" style="margin:20pt; height:40px;" href="https://github.com/ut-amrl/robo-instruct">
    <h5>
      <img src="assets/images/github.png" style="height:30px;"/> Code
    </h5>
  </a>

  <a role="button" class="btn btn-outline-secondary" style="margin:20pt; height:40px;" href="assets/documents/Democratizing_LLM_arvix.pdf">
    <h5>
      <img src="assets/images/document_icon.png" style="height:30px;"/> Paper
    </h5>
  </a>
</div>

<div class="text-center">
  <img src="assets/images/ri_framework.png" alt="robo-instruct framework">
</div>

<hr>

# Abstract

Large language models (LLMs) have shown great promise at generating robot programs from natural language given domain-specific robot application programming interfaces (APIs). However, the performance gap between proprietary LLMs and smaller open-weight LLMs remains wide. This raises a question: Can we fine-tune smaller open-weight LLMs for generating domain-specific robot programs to close the performance gap with proprietary LLMs? While Self-Instruct is a promising solution by generating a diverse set of training data, it cannot verify the correctness of these programs. In contrast, a robot simulator with a well-defined world can identify execution errors but limits the diversity of programs that it can verify. In this work, we introduce Robo-Instruct, which brings the best of both worlds -- it promotes the diversity of Self-Instruct while providing the correctness of simulator-based checking. Robo-Instruct introduces RoboSim to synthesize a consistent world state on the fly by inferring properties relevant to the program being checked, and simulating actions accordingly. Furthermore, the instructions and programs generated by Self-Instruct may be subtly inconsistent -- such as the program missing a step implied by the instruction. Robo-Instruct further addresses this with InstAlign, an instruction-program alignment procedure that revises the task instruction to reflect the actual results of the generated program. Given a few seed task descriptions and the robot APIs, Robo-Instruct is capable of generating a training dataset using only a small open-weight model. This dataset can then be used to fine-tune small open-weight language models, enabling them to match or even exceed the performance of several proprietary LLMs, such as GPT-3.5-Turbo and Gemini-Pro.
<div class="text-center">
  <img src="assets/images/motivation.png" alt="robo-instruct framework">
</div>

<hr>

# RoboSim

<div class="text-center">
  <img src="assets/images/robosim_algorithm.png" alt="robo-instruct framework">
</div>

<div class="text-center" style="margin-top:5rem">
  <img src="assets/images/dynamic_eval_algorithm.png" alt="robo-instruct framework">
</div>

<h2 style="text-align: left;">RoboSim Example</h2>
<div class="text-center">
  <label class="toggle-switch">
      <input type="radio" name="toggle" id="videoBtn" checked onchange="toggleContent('video')">
      <span class="slider"></span>
  </label>
  <strong>Video</strong>
  <label class="toggle-switch">
      <input type="radio" name="toggle" id="demoBtn" onchange="toggleContent('demo')">
      <span class="slider"></span>
  </label>
  <strong>Interactive Demo</strong>
</div>
<div id="videoContent" class="demo-content show">
  <h4><strong>Video</strong></h4>
  <video muted autoplay loop>
    <source src="assets/media/robosim_animation.mp4" type="video/mp4">
  </video>
</div>
<div id="demoContent" class="demo-content">
  <h4><strong>Interactive Demo</strong></h4>
  <div class="text-center mt-2" style="margin: 15px">
    <div id="mediaDisplay" class="media-container">
        <img src="assets/images/robosim_example/Slide1.PNG" alt="Slide 1" class="media-slide active" style="width: 100%;">
        <video muted autoplay class="media-slide" style="width: 100%; display: none;">
          <source src="assets/media/robosim_example_slide_1.mp4" type="video/mp4">
        </video>
        <img src="assets/images/robosim_example/Slide2.PNG" alt="Slide 2" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide3.PNG" alt="Slide 3" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide4.PNG" alt="Slide 4" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide5.PNG" alt="Slide 5" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide6.PNG" alt="Slide 6" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide7.PNG" alt="Slide 7" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide8.PNG" alt="Slide 8" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide9.PNG" alt="Slide 9" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide10.PNG" alt="Slide 10" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide11.PNG" alt="Slide 11" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide12.PNG" alt="Slide 12" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide13.PNG" alt="Slide 13" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide14.PNG" alt="Slide 14" class="media-slide" style="width: 100%; display: none;">
        <img src="assets/images/robosim_example/Slide15.PNG" alt="Slide 15" class="media-slide" style="width: 100%; display: none;">
        <video muted autoplay class="media-slide" style="width: 100%; display: none;">
          <source src="assets/media/robosim_example_slide_16.mp4" type="video/mp4">
        </video>
    </div>
    <div class="mt-3">
        <button id="prevBtn" class="btn btn-primary" onclick="displayPrevious()" style="margin-right:2rem" >Display Previous</button>
        <button id="nextBtn" class="btn btn-primary" onclick="displayNext()" style="margin-left:2rem" >Display Next</button>
    </div>
  </div>
</div>

<script src="assets/js/robosim_demo.js"></script>

<hr>

# InstAlign

<div class="text-center">
  <img src="assets/images/instalign_algorithm.png" alt="robo-instruct framework">
</div>

<hr>

# Synthetic Program Execution Failure Analysis

<div style="text-center">
  <img src="assets/images/failing_programs_new.png" alt="robo-instruct framework">
</div>

<hr>

# Inference Latency Comparison

<video muted autoplay loop>
  <source src="assets/media/latency.mp4" >
</video>

<hr>

# Model Performances

<div id="bar-chart"></div>
<script src="assets/js/performance_plot.js"></script>


<!-- fine-tuned model -->
<hr>





#### Citation
```shell
@misc{hu2024roboinstruct,
      title={Robo-Instruct: Simulator-Augmented Instruction Alignment For Finetuning CodeLLMs}, 
      author={Zichao Hu and Junyi Jessy Li and Arjun Guha and Joydeep Biswas},
      year={2024},
      eprint={2405.20179},
      archivePrefix={arXiv},
      primaryClass={cs.CL}
}
```